---
title: "Analyzing Geographic and Demographic Patterns of Homelessness"
subtitle: "Exploring Spatial Variations in Shelter Demand and Gender/Age-Based Disparities"
author: 
  - Jiwon Choi
thanks: "Code and data are available at: [https://github.com/jwonc4602/Analyzing-Geographic-and-Demographic-Patterns-of-Homelessness](https://github.com/jwonc4602/Analyzing-Geographic-and-Demographic-Patterns-of-Homelessness)."
date: today
date-format: long
abstract: "This research investigates the difficulties encountered by the homeless, even with available shelters, spurred by a recent case of a homeless individual dying due to extreme cold. By conducting geographic and demographic assessments of shelter needs, using data from the Shelter Management Information System, it pinpoints areas with significant demand and uncovers disparities in shelter use based on gender and age. The results assist policymakers, shelter operators, and advocacy groups in effectively distributing resources and actively addressing homelessness issues."
format: pdf
toc: true
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

#### Workspace set-up ####

## Load packages
library(tidyverse)
library(knitr)
library(here)
library(dplyr)
library(ggplot2)
library(readr)

#read in cleaned data #
cleaned_shelter_statistics <- read.csv(here::here("outputs/data/cleaned_shelter_statistics.csv"))
show_col_types = FALSE

#read in cleaned data #
finalized_shelter_statistics <- read.csv(here::here("outputs/data/finalized_shelter_statistics.csv"))
show_col_types = FALSE
```

# Introduction

You can and should cross-reference sections and sub-sections.

The remainder of this paper is structured as follows. @sec-data....

# Data {#sec-data}

## Data Source

This research is based on a dataset sourced from the Shelter Support and Housing Administration (SSHA) division's Shelter Management Information System (SMIS) database, which is accessible through the City of Torontoâ€™s OpenDataToronto Library [@rOpenDataToronto]. The specific dataset employed is named 'Daily Shelter & Overnight Service Occupancy & Capacity' [@ShelterData]. This database acts as a detailed collection of daily entries related to active overnight shelter and associated services. It is the latest and most comprehensive dataset available for analyzing homelessness support services.

## Data Collection
In the process of selecting an appropriate data source for an in-depth analysis of current demographic and geographic trends within shelter services, I evaluated several datasets, including the 'Toronto Shelter System Flow data' [@ShelterSystemFlow] and the 'Daily Shelter Occupancy' [@DailyShelterOccupancy] datasets. However, I ultimately chose the 'Daily Shelter & Overnight Service Occupancy & Capacity' [@ShelterData] dataset for several compelling reasons:

1. While the 'Toronto Shelter System Flow' [@ShelterSystemFlow] data offers valuable insights into the flow of demography through the shelter system, it lacks comprehensive geographic information. This limitation significantly hinders the potential for a detailed analysis of geographic trends and patterns within the shelter system, an aspect critical to my research objectives.

2. The 'Daily Shelter Occupancy' [@DailyShelterOccupancy] dataset, although previously a pertinent source of information, has become less relevant due to its discontinuation. The most recent update for this dataset was recorded on March 10, 2022, rendering it outdated for current analysis purposes. In contrast, the 'Daily Shelter & Overnight Service Occupancy & Capacity' [@ShelterData] dataset provides the most recent and comprehensive data available, making it a more suitable choice for analyzing up-to-date trends and developments in shelter usage and capacity.

Consequently, the decision to utilize the 'Daily Shelter & Overnight Service Occupancy & Capacity' [@ShelterData] dataset was driven by its superior relevance, contemporaneity, and the inclusion of both demographic and geographic data, which are essential for a thorough and current analysis of shelter services.

The methodology for gathering data is structured to ensure a detailed and current perspective of shelter and overnight service initiatives. The data was compiled and examined using the R statistical programming software [@r], supplemented by various tools such as `tidyverse` [@rTidyverse], `ggplot2` [@rGgplot2], `dplyr` [@rDplyr], `readr` [@rReadr], `tibble` [@rTibble], `janitor` [@rJanitor], `knitr` [@rknitr], and `here` [@rHere].

```{r}
#| message: false
#| echo: false
#| label: tbl-cleaned_shelter_statistics
#| tbl-cap: Sample of Cleaned Shelter Statistics Data

head (finalized_shelter_statistics, 5) |>
  kable(
    col.names = c("occupancy_date", "sector", "capacity_type",	"location_city", "occupancy_rate"),
  booktabs = TRUE
  )
```

## Trends in Shelter Occupancy Rates by Dates
```{r fig.width = 15, fig.height = 8, fig.align = "center", fig.pos = 'h'}
#| message: false
#| echo: false
#| label: fig-average-occupancy-rate-by-date
#| fig-cap: Average Occupancy Rate by Date

# Assuming 'finalized_shelter_statistics.csv' is your file path
occupancy_data <- finalized_shelter_statistics

# Calculate the average occupancy rate by date
average_occupancy_rates <- occupancy_data %>%
  group_by(occupancy_date) %>%
  summarise(average_occupancy_rate = sum(occupancy_rate, na.rm = TRUE) / n(), .groups = 'drop')

# Print the results
# print(average_occupancy_rates)

ggplot(average_occupancy_rates, aes(x = occupancy_date, y = average_occupancy_rate, group = 1)) +
  geom_line(color = "red") +
  labs(title = "Average Occupancy Rate by Date",
       x = "Date",
       y = "Average Occupancy Rate") +
  theme(
    plot.title = element_text(size = 20, hjust = 0.5),          # Center and set size for plot title
    axis.text.x = element_text(angle = 45, hjust = 1, size = 17), # Set size for x-axis text
    axis.text.y = element_text(hjust = 1, size = 17),            # Set size for y-axis text
    axis.title.x = element_text(size = 20, hjust = 0.5),         # Center and set size for x-axis title
    axis.title.y = element_text(size = 20, hjust = 0.5),         # Center and set size for y-axis title
  )

```
The latest analysis of data regarding shelter occupancy shows a significant rising trend in average occupancy rates across a span of 21 days, starting from January 1st and ending on January 21st. While there were some daily variations in occupancy rates, the general trend observed was a consistent rise in the need for shelter services. This overarching pattern is further illustrated in Figure 1.

- Starting Point (January 1st): The average occupancy rate on the first of January was 97.30062%. This figure represents a robust utilization of shelter resources, indicating a high demand right at the start of the year.

- Intermediate Fluctuations: Throughout the first three weeks of January, there were instances of fluctuating occupancy rates. These fluctuations, however, did not significantly deviate from the overall upward trajectory. Some days witnessed a decrease in occupancy rates, which can be attributed to various transient factors such as weather conditions, temporary housing solutions, or individual decisions to seek alternative accommodations.

- End Point (January 21st): By the 21st of January, the average occupancy rate had risen to 98.33322%. This incremental increase, while seemingly modest, is statistically significant and points to a growing demand for shelter services.


## Capacity Types in Shelter Services
```{r}
#| message: false
#| echo: false
#| label: fig-number-of-capacity-type-by-user-group
#| fig-cap: Number of Capacity Type by User Group
#| 
number_of_capacity_type_by_user_group <- finalized_shelter_statistics

# Group the data by sector and capacity_type, and count the number of occurrences
grouped_data <- number_of_capacity_type_by_user_group %>%
  group_by(sector, capacity_type) %>%
  summarise(count = n())

# Convert factors to ensure proper ordering in the plot
grouped_data$sector <- factor(grouped_data$sector, levels = unique(number_of_capacity_type_by_user_group$sector))
grouped_data$capacity_type <- factor(grouped_data$capacity_type, levels = c("Bed Based Capacity", "Room Based Capacity"))

# Generate the bar chart
ggplot(grouped_data, aes(x = sector, y = count, fill = capacity_type)) +
  geom_bar(stat = "identity", position = position_dodge(width = 0.7)) +
  theme_minimal() +
  labs(y = "Count", x = "User Group", fill = "Capacity Type") +
  scale_fill_manual(values = c("Bed Based Capacity" = "green", "Room Based Capacity" = "orange")) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) # Rotate x labels for better readability

```
A focused analysis of the capacity types utilized in shelter services reveals distinct patterns in the allocation and utilization of resources, particularly when comparing bed-based and room-based capacities across different user groups.

- Absence of Bed-Based Capacity for Families: A striking observation is the complete lack of bed-based capacity options for family groups. This suggests that the current shelter system does not offer bed-specific accommodations for families, possibly due to the unique needs and privacy concerns associated with family units. This gap in service provision indicates a potential area for development and improvement in catering to the needs of families seeking shelter.

- Dominance of Bed-Based Capacity for Other User Groups: In contrast to the situation with families, other user groups predominantly utilize bed-based capacity in shelters. This trend is significant, indicating that for individuals and non-family groups, bed-based accommodations are the primary form of shelter provided. This form of capacity is likely favored due to its efficiency in maximizing space and accommodating a larger number of individuals within the shelter system.

- Limited Use of Room-Based Capacity: The analysis also shows that room-based capacity, while available, is less commonly used than bed-based options for non-family groups. This could be due to various factors, including limited availability, higher maintenance costs, or specific shelter policies and user preferences.
```{r}
#| message: false
#| echo: false
#| label: fig-average-occupancy-rate-by-city
#| fig-cap: Average Occupancy Rate by City
#| 
data <- finalized_shelter_statistics
# Calculate the average occupancy rate by city
average_occupancy_by_city <- data %>%
  group_by(location_city) %>%
  summarise(average_occupied_rate_by_city = mean(occupancy_rate))

# Create a bar plot
ggplot(average_occupancy_by_city, aes(x = location_city, y = average_occupied_rate_by_city)) +
  geom_bar(stat = 'identity') +
  theme_minimal() +
  labs(title = 'Average Occupancy Rate by City',
       x = 'City',
       y = 'Average Occupancy Rate') +
  ylim(0, max(average_occupancy_by_city$average_occupied_rate_by_city) + 10)

# Note: Users should replace 'your_data.csv' with the actual path to their data file.

```

# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this.

## Second discussion point


\newpage

# References
